<div class="form-container" [formGroup]="affForm" [class.loading-active]="isLoading" #formContainer>

  <div class="spinner-container">
    <md-spinner class="mat-accent" *ngIf="isLoading"></md-spinner>
  </div>

  <div class="form-actions">
    <ng-container *ngIf="!isDialog">
      <button md-raised-button class="mat-accent" (click)="onSave()"> Save </button>
      <button md-raised-button (click)="location.back()"> Cancel </button>
    </ng-container>
  </div>

  <div class="form-header">
    <h3 class="mat-headline"> Affiliate Form </h3>
    <p *ngIf="affiliate.sfId!==''"> Salesforce ID: {{ affiliate.sfId }} </p>
  </div>

  <div class="form-body">

    <div class="input-item">
      <app-sf-lookup #afLookup formControlName="affiliate" [sfObject]="affiliate" [fields]="extraFields" [displayFn]="displayFn.bind(this)"
        placeholder="Name" (onSelect)="selectedAffiliate($event)" (onChange)="affiliate.name = $event"></app-sf-lookup>
    </div>

    <div class="input-item">
      <div class="logo-img">
        <img src="{{ affiliate.logo }}" alt="logo image">
      </div>

      <md-input-container>
        <input mdInput placeholder="Logo URL" formControlName="logo">
      </md-input-container>
    </div>

    <div class="input-item">
      <md-input-container>
        <input mdInput placeholder="Website" formControlName="website">
      </md-input-container>
    </div>

    <div class="input-item">
      <p class="mat-body-2">Contact Information</p>
      <md-input-container>
        <input mdInput placeholder="Public Contact Name" formControlName="publicContact">
      </md-input-container>
      <!-- </div> -->

      <!-- <div class="input-item"> -->
      <md-input-container>
        <input mdInput placeholder="Public Contact Email" formControlName="publicContactEmail">
      </md-input-container>
      <!-- </div> -->

      <!-- <div class="input-item"> -->
      <md-input-container>
        <input mdInput placeholder="Public Contact Phone" formControlName="publicContactPhone">
      </md-input-container>
    </div>

    <div class="input-item">
      <md-input-container [floatPlaceholder]="'always'">
        <input type="text" mdInput formControlName="langControl" [mdAutocomplete]="langSearch" placeholder="Languages">
      </md-input-container>

      <md-autocomplete #langSearch="mdAutocomplete">
        <md-option *ngFor="let lang of languageOptions | async" [value]="lang" (onSelectionChange)="onSelectLanguage(lang)">
          {{ lang }}
        </md-option>
      </md-autocomplete>

      <div class="language-list">
        <p class="mat-body-2"> Languages </p>
        <div class="language-list-item" *ngFor="let lang of affiliate.languages">
          <button md-icon-button (click)="removeLanguage(lang)">
            <md-icon svgIcon="delete_grey"></md-icon>
          </button> {{ lang }}
        </div>
      </div>
    </div>

    <div class="input-item">
      <p class="mat-body-2">Summary</p>
      <ckeditor [(ngModel)]="affiliateSummary" debounce="500" [ngModelOptions]="{standalone: true}"></ckeditor>
    </div>
  </div>

  <div class="form-actions">
    <ng-container *ngIf="isDialog">
      <button md-raised-button class="mat-accent" [md-dialog-close]="affiliate" [disabled]="!affForm.valid"> Save </button>
      <button md-raised-button [md-dialog-close]="false"> Cancel </button>
    </ng-container>

    <ng-container *ngIf="!isDialog">
      <button md-raised-button class="mat-accent" (click)="onSave()"> Save </button>
      <button md-raised-button (click)="location.back()"> Cancel </button>
    </ng-container>
  </div>
</div>